{% extends 'store/base.html' %}
{% load static %}
{% block title %}Invoice detail{% endblock %}
{% load crispy_forms_tags %}
{% block content %}
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> Order confirmation </title>
<meta name="robots" content="noindex,nofollow" />
<meta name="viewport" content="width=device-width; initial-scale=1.0;" />
<style>
  .invoice-receipt {
    display: block;
    margin-left: auto;
    margin-right: auto;
    height: fit-content;
    width: 50%;
    background-color: #ffffff;
    font-family: 'courier';
    border: 1px solid #eaeaea;
    border-radius: 10px;
    padding: 20px;
  }

  .logo-container {
    text-align: center;
    margin-bottom: -10%; /* Reduced from 20px */
  }

  .logo-container img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
  }

  .btn-print {
    margin-bottom: 20px;
  }

  @import "compass/css3";
  .invoice-receipt {
    display: block;
    margin-left: auto;
    margin-right: auto;
    height: fit-content;
    width: 50%;
    background-color: #ffffff;
    font-family: 'courier';
  }
</style>
<div class="container text-center m-5">
  <a class="btn btn-success btn-sm btn-print" onclick="printInvoice()"><i class="fa fa-print"></i> Print</a>
</div>
<div class="container invoice-receipt p-5">
   <!-- Logo -->
   <div class="logo-container">
    <img src="{% static 'images/logo/logo.png' %}" alt="Company Logo">
  </div>
  <!-- /Logo -->
  <!-- Header -->
  <table width="100%" cellpadding="0" cellspacing="0" align="center" class="fullTable" >
    <tr>
      <td height="20"></td>
    </tr>
    <tr>
      <td>
        <table width="600" cellpadding="0" cellspacing="0" align="center" class="fullTable" style="border-radius: 10px 10px 0 0;">
          <tr class="hiddenMobile">
            <td height="40"></td>
          </tr>
          <tr class="visibleMobile">
            <td height="30"></td>
          </tr>

          <tr>
            <td>
              <table width="480" cellpadding="0" cellspacing="0" align="center" class="fullPadding">
                <tbody>
                  <tr>
                    <td>
                      <table width="220" cellpadding="0" cellspacing="0" align="left" class="col">
                        <tbody>
                          <tr>
                            <td align="left">AutoInven</td>
                          </tr>
                          <tr class="hiddenMobile">
                            <td height="40"></td>
                          </tr>
                          <tr class="visibleMobile">
                            <td height="20"></td>
                          </tr>
                          <tr>
                            <td style="font-size: 12px; color: #5b5b5b;  line-height: 18px; vertical-align: top; text-align: left;">
                              Hello, {{invoice.customer_name}}
                              <br> Thank you for shopping from our store and for your order.
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <table width="220" cellpadding="0" cellspacing="0" align="right" class="col">
                        <tbody>
                          <tr class="visibleMobile">
                            <td height="20"></td>
                          </tr>
                          <tr>
                            <td height="5"></td>
                          </tr>
                          <tr>
                            <td style="font-size: 21px; color: #ff0000; letter-spacing: -1px;  line-height: 1; vertical-align: top; text-align: right;">
                              Invoice
                            </td>
                          </tr>
                          <tr>
                          <tr class="hiddenMobile">
                            <td height="50"></td>
                          </tr>
                          <tr class="visibleMobile">
                            <td height="20"></td>
                          </tr>
                          <tr>
                            <td style="font-size: 12px; color: #5b5b5b;  line-height: 18px; vertical-align: top; text-align: right;">
                              <small>ORDER</small> #800000025<br />
                              <small>{{invoice.date}}</small>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
  <!-- /Header -->
  <!-- Order Details -->
  <table width="100%" cellpadding="0" cellspacing="0" align="center" class="fullTable">
    <tbody>
      <tr>
        <td>
          <table width="600" cellpadding="0" cellspacing="0" align="center" class="fullTable">
            <tbody>
              <tr>
              <tr class="hiddenMobile">
                <td height="60"></td>
              </tr>
              <tr class="visibleMobile">
                <td height="40"></td>
              </tr>
              <tr>
                <td>
                  <table width="480" cellpadding="0" cellspacing="0" align="center" class="fullPadding">
                    <tbody>
                      <tr>
                        <th style="font-size: 12px;  color: #5b5b5b; font-weight: normal; line-height: 1; vertical-align: top; padding: 0 10px 7px 0;" width="52%" align="left">
                          Item
                        </th>
                        <th style="font-size: 12px;  color: #5b5b5b; font-weight: normal; line-height: 1; vertical-align: top; padding: 0 0 7px;" align="center">
                          Quantity
                        </th>
                        <th style="font-size: 12px;  color: #1e2b33; font-weight: normal; line-height: 1; vertical-align: top; padding: 0 0 7px;" align="right">
                          Subtotal
                        </th>
                      </tr>
                      <tr>
                        <td height="1" style="background: #bebebe;" colspan="4"></td>
                      </tr>
                      <tr>
                        <td height="10" colspan="4"></td>
                      </tr>
                      <tr>
                        <td style="font-size: 12px;  color: #ff0000;  line-height: 18px;  vertical-align: top; padding:10px 0;" class="article">
                          {{invoice.item.name}}
                        </td>

                        <td style="font-size: 12px;  color: #646a6e;  line-height: 18px;  vertical-align: top; padding:10px 0;" align="center">{{invoice.quantity}}</td>
                        <td style="font-size: 12px;  color: #1e2b33;  line-height: 18px;  vertical-align: top; padding:10px 0;" align="right">Ksh {{invoice.price_per_item}}</td>
                      </tr>
                      <tr>
                        <td height="1" colspan="4" style="border-bottom:1px solid #e4e4e4"></td>
                      </tr>
                      <tr>
                        <td height="1" colspan="4" style="border-bottom:1px solid #e4e4e4"></td>
                      </tr>
                    </tbody>
                  </table>
                </td>
              </tr>
              <tr>
                <td height="20"></td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- /Order Details -->
  <!-- Total -->
  <table width="100%" cellpadding="0" cellspacing="0" align="center" class="fullTable">
    <tbody>
      <tr>
        <td>
          <table width="600" cellpadding="0" cellspacing="0" align="center" class="fullTable">
            <tbody>
              <tr>
                <td>

                  <!-- Table Total -->
                  <table width="480" cellpadding="0" cellspacing="0" align="center" class="fullPadding">
                    <tbody>
                      <tr>
                        <td style="font-size: 12px;  color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; ">
                          Subtotal
                        </td>
                        <td style="font-size: 12px;  color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; white-space:nowrap;" width="80">
                          {{invoice.total}}
                        </td>
                      </tr>
                      <tr>
                        <td style="font-size: 12px;  color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; ">
                          Shipping &amp; Handling
                        </td>
                        <td style="font-size: 12px;  color: #646a6e; line-height: 22px; vertical-align: top; text-align:right; ">
                          {{invoice.shipping}}
                        </td>
                      </tr>
                      <tr>
                        <td style="font-size: 12px;  color: #000; line-height: 22px; vertical-align: top; text-align:right; ">
                          <strong>Grand Total</strong>
                        </td>
                        <td style="font-size: 12px;  color: #000; line-height: 22px; vertical-align: top; text-align:right; ">
                          <strong>{{invoice.grand_total}}</strong>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  <!-- /Table Total -->

                </td>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <!-- /Total -->
  <!-- /Information -->
  <table width="100%" cellpadding="0" cellspacing="0" align="center" class="fullTable" >

    <tr>
      <td>
        <table width="600" cellpadding="0" cellspacing="0" align="center" class="fullTable" style="border-radius: 0 0 10px 10px;">
          <tr>
            <td>
              <table width="480" cellpadding="0" cellspacing="0" align="center" class="fullPadding">
                <tbody>
                  <tr>
                    <td style="font-size: 12px; color: #5b5b5b;  line-height: 18px; vertical-align: top; text-align: left;">
                      Have a nice day.
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr class="spacer">
            <td height="50"></td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td height="20"></td>
    </tr>
  </table>


  <!-- Footer -->
<footer style="background-color: #f8f9fa; padding: 20px; border-top: 1px solid #e4e4e4; text-align: center; font-size: 12px; color: #646a6e;">
  <div>
    <p>
      &copy; {{ year }} AutoInven. All rights reserved.
      <br>
      Visit our website: <a href="https://www.autoinven.com" target="_blank" style="color: #007bff; text-decoration: none;">www.autoinven.com</a>
    </p>
  </div>
  <div>
    <p>
      For support, contact us at 
      <a href="mailto:support@autoinven.com" style="color: #007bff; text-decoration: none;">support@autoinven.com</a> 
      or call +92 3363506933.
    </p>
  </div>
</footer>
<!-- /Footer -->



<script>
  function printInvoice() {
    const invoiceElement = document.querySelector('.invoice-receipt');
    const printWindow = window.open('', '_blank');
    printWindow.document.write(`
      <html>
        <head>
          <title>Print Invoice</title>
          <style>
              .logo-container {
    text-align: center;
    margin-bottom: -10%; /* Reduced from 20px */
  }

  .logo-container img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
  }
            body { font-family: 'Courier New', Courier, monospace; }
            .invoice-receipt { width: 100%; border: 1px solid #eaeaea; padding: 20px; }
          </style>
        </head>
        <body>
          ${invoiceElement.outerHTML}
        </body>
      </html>
    `);
    printWindow.document.close();
    printWindow.print();
  }
</script>
</div>
{% endblock %}